# База знаний SportReserve

## Часто задаваемые вопросы
Раздел, где собраны ответы на наиболее частые вопросы пользователей.
| Вопрос | Ответ | 
|:----------:|:----------:|
| Как забронировать площадку? | Для бронирования площадки необходимо являтся зарегестрированным пользователем с выполненой авторизацией на сайте. Процесс бронирования состоит из следующих шагов: выбрать соответствующую площадку на странице площадок, выбрать временные рамки бронирования на той же странице, нажать кнопку "Забронировать" - бронь площадки успешно записана | 
| Какие виды спорта доступны для бронирования? | Список видов спорта для бронирования своевременно обновляется, актуальную информацию площадок доступных для публичного бронирования предоставляет старница каталога |
| Как изменить или отменить бронь? | Отмена бронировния доступна в личном профиле пользователя в разделе "История бронирования". Процесс отмены бронирования состоит из следующих шагов: выбрать соответствующую бронь, нажать кнопку "Отменить бронирование" - заявка на отмену бронирования поступит администратору. Функционал изменения бронирования отсутствует - для изменения брони необходимо: 1.Отменить соответствующее бронирование и забронировать с измененными параметрами ЛИБО 2.Связаться с тех.поддержкой с соответствующей заявкой |
| Как я могу связаться с поддержкой? | Связь с технической поддержкой сервиса осуществляется при помощи чат-блока на странице каталога |


## Инструкция по пользованию сайта
### Пользователь
Пошаговые руководства, которые объясняют, как пользоваться основными функциями сайта
#### Регистрация
- Перейти на старницу регистрации,
- Ввести все необходимые данные в соответствующие поля ввода,
- Нажать кнопку "Зарегистрироваться".
#### Вход в аккаунт
- Перейти на старницу входа в аккаунт,
- Ввести все необходимые данные в соответствующие поля ввода,
- Нажать кнопку "Войти".
#### Процесс бронирования
- Перейти на старницу каталога,
- Выбрать тип площадки необходимой для бронирования из общего списка плошадок,
- Из списка плошадок, соответствующих выбранному типу, выбрать площадку для бронирования,
- У выбранной площадки выбрать даты начала и конца срока бронирования,
- Нажать кнопку "Забронировать".
#### Управление бронированиями
- Перейти на старницу профиля,
- Из списка плошадок в разделе "История бронирования", выбрать площадку для отмены бронирования,
- Нажать кнопку "Отменить бронирование".
#### Обращение в тех.поддержку
- Перейти на старницу каталога,
- Нажать кнопку, открывающую чат-бокс и расположенную в нижнем правом углу страницы,
- В открывшейся форме в соответствущем поле ввода написать вопрос,
- Отправить написанное, кликнув по иконке, появившейся справо от поля ввода сообщений,
- Дождаться ответа.
### Специалист технической поддержки
#### Выбор пользователя для ответа
- Выполнить вход в панель тех.поддержки
- В разделе с чатами, расположенном слева на странице, выбрать соответствующий чат, почеменный "Ждёт ответа".
#### Коммуникация с пользователем
- Выполнить вход в панель тех.поддержки
- В разделе с чатами, расположенном слева на странице, выбрать соответствующий чат, почеменный "Ждёт ответа",
- В открывшимся диалогов окне ознакомиться с вопросом и веткой общения,
- Сформулировать толковый и помогающий ответ,
- Ввести ответ в поле ввода сообщения,
- Отправить напечатанное, нажав кнопку отправки сообщения.
### Администратор
#### Отмена бронирования
- Выполнить вход в панель администратора,
- Перейти на вкладку "Отмена бронирования",
- Выбрать существующие заявки в разделе с заявками,
- Ознакомиться с заявков (при необходимости произвести контакт с пользователем),
- Провести отмену бронирования или отмену заявки на отмену бронирования, нажав на кнопки "Отменить бронирование" и "Отклонить заяку" соответственно.
#### Редактирование площадок
- Выполнить вход в панель администратора,
- Перейти на вкладку "Изменение площадок",
- Выбрать соответствующее действие (добавить/изменить/удалить) в панеле выбора,
    1. Добавление новой площадки
        - Выбрать "тип" и "подтип" добавляемой площадки,
        - Ввести информацию во все соответствующие поля ввода (без пропусков),
        - Нажать кнопку "Добавить".
    2. Изменение существующей площадки
        - Выбрать из списка соответствующую плошадку для изменения,  
        - Ввести информацию в соответствующие поля ввода (если менять данный параметр площадки не нужно - пропуск),
        - Нажать кнопку "Изменить".
    3. Удалить площадку
        - Из списка площадок выбрать необходимую,
        - Нажать на неё для удаления.

## Техническое содержание
Краткое описание технической части
### app.py
| Функция | Описание | 
|:----------:|:----------:|
| path_to_save(type, subtype) | Возвращает корректный путь для сохранения картинок |
| get_db_connection() | Подключение к базе данных |
| total_price(price, start_date, finish_date) | Возвращает итоговую сумму бронирования |
| helperpage() | Считывает необходимою информацию о ветках чата и сами диалоги; Отображает панель бариста с соответствующими данными |
| profilepage() | Считывает необходимою информацию о пользователе в сессии, о его бронированиях и запросах на отмену на бронирование; Отображает страницу пользователя с прилегающей информацией |
| translate(place_name) | Возвращает переведенный текст (тип/подтип) |
| IsReserved(place_id) | Проверяет наличие резервации на площадке за неделю; Возвращает список списков дат начала и окончания резервации на площадке для указанного place_id, если резервация имеется. В противном случае возвращается False. |
| get_dates(isReserved=None) | Проверка на резервацию площадки. isReserved: информация о резервации площадки. Если резервации нет (isReserved=None), возвращаются даты на 7 дней вперед, учитывая сегодня. Если резервация имеется на ближайшие дни, возвращаются даты на 7 дней вперед после конца резервации. Если резервация имеется на дальние дни, возвращаются даты на дни до начала записанной резервации. Возвращает список дат на основе описанных условий. |
| cancelation_form() | Обработчик события нажатия кнопки "Отменить бронирование" - создает заявку на отмену пробнирования. |
| submit_message() | Принимает и сохраняет сообщение пользователя |
| get_messages() | Отображение сообщений для конкретного пользователя в чат-боксе |
| submit_message_helper() | Принимает и сохраняет сообщение хелпера |
| get_messages_helper() | Отображение сообщений конкретного пользователя в чат-боксе у хелпера |
| handle_form() | Записывание бронирования конкретной площадки для каждого пользователя |
| catalog(place_name) | Считывает необходимою информацию о площадках определенного типа; Отображает страницу площадок с прилегающей информацией |
| catalogpage() | Считывает необходимою информацию о площадках; Отображает страницу каталога с прилегающей информацией |
| signup() | Реализация регистрации. Считывание введенных данных и действие по инструкции для регистрации |
| main_page() | Отображение главной страницы |
| login() | Реализация авторизации. Считывание введенных данных и действие по инструкции для авторизации |
| logout() | Разлогинивание |
| cancellation_requests() | Обработчик события нажатия кнопок "Отменить бронирование" и "Отклонить заявку" - удаляет из соответствующих таблиц определенную информацию |
| placeaction() | Функция для изменения (создания/изменения/удаления) информации о площадках |
| adminpage() | Считывает необходимою информацию о площадках, заявках на отмену; Отображает панель администратора с соответствующими данными |

### createdb.py
Создание необходимых таблиц

### dbfill.py
| Функция | Описание | 
|:----------:|:----------:|
| tennis() | Запись соответствующих данных в таблицу places |
| golf() | Запись соответствующих данных в таблицу places |
| football() | Запись соответствующих данных в таблицу places |
| badminton() | Запись соответствующих данных в таблицу places |
| hockey() | Запись соответствующих данных в таблицу places |
| curling() | Запись соответствующих данных в таблицу places |
| swimmingpool() | Запись соответствующих данных в таблицу places |
| parquet_sport() | Запись соответствующих данных в таблицу places |

### dbpush.py
Реализует класс DataPusher пердставляющий собой инструмент для взаимодействия с БД
| Метод | Описание | 
|:----------:|:----------:|
| __init__ | Конструктор |
| __enter__ | Метод, активирующийся при создании объекта данного класса - подключение к БД |
| __exit__ | Метод, активирующийся при удалении объекта данного класса - отключение от БД |
| update_data(self, table, ID, **kwargs) | Обновить запись в определенной таблице по конкретному айди |
| delete_data(self, table, ID) | Удалить запись в определенной таблице по конкретному айди |
| insert_data(self, table, **kwargs) | Вставить запись в определенную таблицу |
| select_data(self, table, *fields, **conditions) | Считать определенные элементы строки в определенной таблице при конкретных параметрах |